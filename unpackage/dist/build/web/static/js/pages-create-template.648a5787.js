(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-create-template"],{"12cb":function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("fd3c"),i("dd2b"),i("aa9c"),i("5c47"),i("a1c1"),i("0506"),i("8f71"),i("bf0f");var n={data:function(){return{formData:{token:uni.getStorageSync("userInfo").token},action:this.host+"/api/common/upload",showLoading:!0,jsonParams:[],content:"",title:"",images:"",phone:"",tagsjson:{},select:[],files:[],group_id:0}},watch:{content:{handler:function(t,e){this.title=t.substr(0,50)},immediate:!0}},onLoad:function(t){var e=this;this.api.group({id:t.id}).then((function(t){uni.setNavigationBarTitle({title:t.name}),e.group_id=t.id,e.jsonParams=JSON.parse(t.paramjson),e.jsonParams.map((function(t){e.tagsjson[t.k]="",t.v=t.v.split(",")})),setTimeout((function(){e.showLoading=!1}),1e3)}))},methods:{chooseTags:function(t,e){var i=this,n=this.jsonParams[t];if(1==n["m"]){var s=0;this.select.map((function(n,a){n==t+"-"+e&&(i.select.splice(a,1),s++)})),0==s?(this.select.push(t+"-"+e),this.tagsjson[n["k"]]+=n["v"][e]+","):this.tagsjson[n["k"]]=this.tagsjson[n["k"]].replace(n["v"][e]+",","")}else this.tagsjson[n["k"]]=n["v"][e],this.select.map((function(e,n){e.split("-")[0]==t&&i.select.splice(n,1)})),this.select.push(t+"-"+e)},uploadChange:function(t){this.files=t},submit:function(){if(this.$u.test.isEmpty(this.content))return this.$u.toast("内容不能为空");if(this.$u.test.isEmpty(this.title))return this.$u.toast("标题不能为空");if(this.$u.test.isEmpty(this.phone))return this.$u.toast("电话不能为空");for(var t in this.jsonParams){var e=this.jsonParams[t];if(""==this.tagsjson[e["k"]]){if(1==e["r"])return this.$u.toast("请输入".concat(e["k"],"值"));delete this.tagsjson[e["k"]]}}this.files.length>0?this.$refs.uUpload.upload():this.create()},afterUpload:function(t,e){var i=t.filter((function(t){return 100==t.progress}));i.length>0&&(i=i.map((function(t){return t.response.data.url})),this.images=i.join()),this.create()},create:function(){var t=this,e={group_id:this.group_id,title:this.title,content:this.content,phone:this.phone,tagsjson:this.tagsjson};this.images.length>0&&(e.images=this.images),this.api.create(e).then((function(e){uni.showToast({title:"发布成功"}),setTimeout((function(){uni.reLaunch({url:"/pages/index/group?id="+t.group_id})}),1500)})).catch((function(t){}))}}};e.default=n},"825c":function(t,e,i){"use strict";i.r(e);var n=i("12cb"),s=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=s.a},"9b39":function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var n={uInput:i("0bf2").default,uUpload:i("8cb3").default,uButton:i("c7c7").default,xidicmsLoading:i("f88e").default},s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"u-p-20"},[i("v-uni-view",{staticClass:"u-border-bottom u-p-20"},[i("u-input",{attrs:{type:"textarea","custom-style":{fontSize:"32upx"},placeholder:"在此输入内容,140字以内"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t.content?i("v-uni-view",{staticClass:"input-item"},[i("v-uni-view",{staticClass:"title"},[i("v-uni-text",{staticClass:"require"},[t._v("*")]),i("v-uni-text",[t._v("标题")])],1),i("v-uni-input",{staticClass:"right-input",attrs:{type:"text",placeholder:"请输入标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1):t._e(),i("v-uni-view",{staticClass:"u-border-bottom u-p-b-20"},[i("u-upload",{ref:"uUpload",attrs:{"max-count":"9",action:t.action,header:t.formData,"auto-upload":!1},on:{"on-uploaded":function(e){arguments[0]=e=t.$handleEvent(e),t.afterUpload.apply(void 0,arguments)},"on-list-change":function(e){arguments[0]=e=t.$handleEvent(e),t.uploadChange.apply(void 0,arguments)}}})],1),t._l(t.jsonParams,(function(e,n){return i("v-uni-view",{key:n,staticClass:"tags-input"},[i("v-uni-view",{staticClass:"title"},[1==e.r?i("v-uni-text",{staticClass:"require"},[t._v("*")]):t._e(),i("v-uni-text",[t._v(t._s(e.k))])],1),i("v-uni-view",{staticClass:"u-flex-1 u-flex u-flex-wrap"},t._l(e.v,(function(e,s){return i("v-uni-text",{class:t.select.includes(n+"-"+s)?"tags active":"tags",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseTags(n,s)}}},[t._v(t._s(e))])})),1)],1)})),i("v-uni-view",{staticClass:"input-item"},[i("v-uni-view",{staticClass:"title"},[i("v-uni-text",{staticClass:"require"},[t._v("*")]),i("v-uni-text",[t._v("电话")])],1),i("v-uni-input",{staticClass:"right-input",attrs:{type:"number",placeholder:"请输入电话"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),i("v-uni-view",{staticStyle:{margin:"20upx","padding-bottom":"100px"}},[i("u-button",{attrs:{type:"primary",shape:"circle","custom-style":{background:"#129db1"}},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("确认发布")])],1),i("xidicms-loading",{attrs:{show:t.showLoading}})],2)},a=[]},bcb5:function(t,e,i){"use strict";i.r(e);var n=i("9b39"),s=i("825c");for(var a in s)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(a);i("bed1");var o=i("828b"),u=Object(o["a"])(s["default"],n["b"],n["c"],!1,null,"5fbe2b4e",null,!1,n["a"],void 0);e["default"]=u.exports},bed1:function(t,e,i){"use strict";var n=i("d18c"),s=i.n(n);s.a},d18c:function(t,e,i){var n=i("dd1c");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=i("967d").default;s("d1cb5d2a",n,!0,{sourceMap:!1,shadowMode:!1})},dd1c:function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\n * 使用的时候，请将下面的一行复制到您的uniapp项目根目录的uni.scss中即可\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \n */.input-item[data-v-5fbe2b4e]{display:flex;align-items:center;padding:%?20?%}.tags-input[data-v-5fbe2b4e]{display:flex;align-items:flex-start;padding:%?40?% %?20?%;border-bottom:solid 1px #eee}.title[data-v-5fbe2b4e]{width:%?100?%;margin-right:%?20?%}.right-input[data-v-5fbe2b4e]{flex:1;border-bottom:solid 1px #eee;padding:%?10?% 0;font-size:%?32?%}.tags[data-v-5fbe2b4e]{background:#f3f3f3;color:#999;font-size:%?30?%;border:solid 1px #ddd;padding:%?4?% %?10?%;margin-right:%?20?%;margin-bottom:%?20?%;border-radius:%?10?%}.active[data-v-5fbe2b4e]{background:#129db1;color:#fff}.require[data-v-5fbe2b4e]{color:red}',""]),t.exports=e}}]);